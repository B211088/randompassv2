<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Random Password Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0f172a;
      color: #f8fafc;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: start;
      min-height: 100vh;
      padding: 30px;
    }
    h1 { color: #a78bfa; }
    .container {
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 0px 20px 20px 20px;
      width: 100%;
      max-width: 520px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .password-box {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 12px;
      font-family: monospace;
      font-size: 18px;
      text-align: center;
      letter-spacing: 1px;
      margin-bottom: 12px;
      user-select: all;
    }
    .buttons { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    button {
      border: none;
      border-radius: 6px;
      padding: 8px 14px;
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      color: #fff;
      transition: 0.2s;
    }
    button#copyFullBtn { background: #d5cb03; }
    button#copyFullBtn:hover { background: #d521cc; }
    button#copyBtn { background: #6366f1; }
    button#copyBtn:hover { background: #4f46e5; }
    button#resetBtn { background: #10b981; }
    button#resetBtn:hover { background: #059669; }
    button#convertBtn { background: #ec4899; }
    button#convertBtn:hover { background: #db2777; }
    h2 {
      margin-top: 24px;
      font-size: 18px;
      border-bottom: 1px solid rgba(255,255,255,0.2);
      padding-bottom: 6px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
    }
    th, td {
      padding: 8px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    th { color: #a78bfa; text-align: left; }
    tr:hover { background: rgba(255,255,255,0.05); }
    .success {
      color: #10b981;
      font-size: 13px;
      margin-top: 8px;
      text-align: center;
      display: none;
    }
    textarea {
      width: 100%;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      color: #f8fafc;
      padding: 10px;
      resize: vertical;
      font-size: 14px;
      margin-top: 10px;
    }
    .container-mess {
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>
  <h1>üîí Random Password Generator</h1>
  <div class="container">
    <div class="container-mess">
      <div id="successMsg" class="success">ƒê√£ copy! ‚úÖ</div>
    </div>

    <div id="passwordBox" class="password-box">Ch∆∞a c√≥ m·∫≠t kh·∫©u</div>
    <div class="buttons">
      <button id="copyBtn">Copy pass</button>
      <button id="copyFullBtn">Copy pass|Time</button>
      <button id="resetBtn">Reset</button>
    </div>



    <h2>Chuy·ªÉn ƒë·ªãnh d·∫°ng d√≤ng Instagram</h2>
    <p>Nh·∫≠p n·ªôi dung v√≠ d·ª•:  
      <br><code>0 post<br>0 followers<br>0 following</code>
    </p>
    <textarea id="multiLineInput" rows="4" placeholder="D√°n n·ªôi dung nhi·ªÅu d√≤ng v√†o ƒë√¢y..."></textarea>
    <div class="buttons">
      <button id="convertBtn">Copy d·∫°ng 1 d√≤ng</button>
    </div>

        <h2>L·ªãch s·ª≠ copy</h2>
    <table id="historyTable">
      <thead>
        <tr><th>#</th><th>M·∫≠t kh·∫©u</th><th>Th·ªùi gian</th></tr>
      </thead>
      <tbody id="historyBody">
        <tr><td colspan="3" style="text-align:center;color:#94a3b8;">Ch∆∞a c√≥ b·∫£n ghi</td></tr>
      </tbody>
    </table>
  </div>

<script>
  const passwordBox = document.getElementById('passwordBox');
  const copyBtn = document.getElementById('copyBtn');
  const copyFullBtn = document.getElementById('copyFullBtn');
  const resetBtn = document.getElementById('resetBtn');
  const historyBody = document.getElementById('historyBody');
  const successMsg = document.getElementById('successMsg');
  const convertBtn = document.getElementById('convertBtn');
  const multiLineInput = document.getElementById('multiLineInput');

  const LOWER = "abcdefghijklmnopqrstuvwxyz";
  const UPPER = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const DIGITS = "0123456789";
  const GIAU = "#";
  const ALL = LOWER + UPPER + DIGITS;
  const LENGTH = 16;

  let currentPassword = "";

  function randomInt(max) {
    return Math.floor(Math.random() * max);
  }

  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = randomInt(i + 1);
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  function generatePassword() {
    const pwd = [
      LOWER[randomInt(LOWER.length)],
      GIAU,
      UPPER[randomInt(UPPER.length)],
      DIGITS[randomInt(DIGITS.length)]
    ];
    for (let i = 3; i < LENGTH; i++) {
      pwd.push(ALL[randomInt(ALL.length)]);
    }
    shuffle(pwd);
    return pwd.join('');
  }

  function createNewPassword() {
    currentPassword = generatePassword();
    passwordBox.textContent = currentPassword;
    successMsg.style.display = "none";
  }

  async function copyPasswordAndTime() {
    try {
      const now = new Date();
      const timeStr = now.toLocaleString('vi-VN');
      const copyText = `${currentPassword}|${timeStr}`;
      await navigator.clipboard.writeText(copyText);
      addToHistory(currentPassword);
      showSuccess();
    } catch {
      alert("Kh√¥ng th·ªÉ copy m·∫≠t kh·∫©u.");
    }
  }

  async function copyPassword() {
    try {
      await navigator.clipboard.writeText(currentPassword);
      showSuccess();
    } catch {
      alert("Kh√¥ng th·ªÉ copy m·∫≠t kh·∫©u.");
    }
  }

  function addToHistory(password) {
    const now = new Date();
    const timeStr = now.toLocaleString('vi-VN');
    const row = document.createElement('tr');
    row.innerHTML = `<td>${historyBody.children.length}</td><td>${password}</td><td>${timeStr}</td>`;
    if (historyBody.children.length === 1 && historyBody.children[0].children.length === 1) {
      historyBody.innerHTML = "";
    }
    historyBody.prepend(row);
  }

  function showSuccess(msg = "ƒê√£ copy! ‚úÖ") {
    successMsg.textContent = msg;
    successMsg.style.display = "block";
    setTimeout(() => (successMsg.style.display = "none"), 1500);
  }

  // üÜï X·ª≠ l√Ω chuy·ªÉn n·ªôi dung nhi·ªÅu d√≤ng ‚Üí 1 d√≤ng (c√≥ s·ª≠a ‚Äú1 post‚Äù -> ‚Äú1 posts‚Äù)
convertBtn.addEventListener("click", async () => {
  const text = multiLineInput.value.trim();
  if (!text) return alert("Vui l√≤ng nh·∫≠p n·ªôi dung c·∫ßn chuy·ªÉn!");

  const lines = text
    .split(/\n+/)
    .map(line => line.trim())
    .filter(Boolean)
    .map(line => {
      // 1Ô∏è‚É£ N·∫øu d√≤ng l√† "1 post" th√¨ th√™m ch·ªØ s
      if (/^1\s+post$/i.test(line)) {
        line = line.replace(/post/i, "posts");
      }

      // 2Ô∏è‚É£ N·∫øu c√≥ "following" th√¨ ƒë·ªïi th√†nh "follwing"
      if (/following/i.test(line)) {
        line = line.replace(/following/gi, "follwing");
      }

      // 3Ô∏è‚É£ X√≥a d·∫•u ph·∫©y trong s·ªë (vd: "1,234" -> "1234")
      line = line.replace(/(\d+),(\d+)/g, "$1$2");

      multiLineInput.value = "";
      
      return line;
    });

  // N·ªëi l·∫°i th√†nh 1 d√≤ng v√† th√™m kho·∫£ng tr·∫Øng sau c·ª•m ƒë·∫ßu
  let oneLine = lines.join("|");
  oneLine = oneLine.replace(/^([^|]+)/, "$1 "); // th√™m kho·∫£ng tr·∫Øng sau c·ª•m ƒë·∫ßu

  await navigator.clipboard.writeText(oneLine);
  showSuccess("ƒê√£ copy ƒë·ªãnh d·∫°ng Instagram! ‚úÖ");
});



  resetBtn.addEventListener('click', createNewPassword);
  copyBtn.addEventListener('click', copyPassword);
  copyFullBtn.addEventListener("click", copyPasswordAndTime);

  createNewPassword();
</script>

</body>
</html>
